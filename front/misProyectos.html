<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mis Proyectos - Proyectos Interdisciplinarios</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="misProyectos.css">
</head>
<body>
  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar" role="navigation" aria-label="Barra lateral">
    <a href="home.html" class="sidebar-item">
      <div class="sidebar-item-icon">
        <img src="https://uxwing.com/wp-content/themes/uxwing/download/web-app-development/home-page-white-icon.png" width="20" alt="Inicio">
      </div>
      <div class="sidebar-item-label">Inicio</div>
    </a>

    <a href="misProyectos.html" class="sidebar-item active" aria-current="page">
      <div class="sidebar-item-icon">
        <img src="https://cdn2.iconfinder.com/data/icons/leto-most-searched-mix-3/64/__menu_more-28-512.png" width="30" alt="Mis Proyectos">
      </div>
      <div class="sidebar-item-label">MisProyectos</div>
    </a>

    <a href="chat.html" class="sidebar-item">
      <div class="sidebar-item-icon">
        <img src="https://www.nicepng.com/png/full/128-1284530_chat-icon-png-white-chat-icon-white-png.png" width="20" alt="Mensajes">
      </div>
      <div class="sidebar-item-label">Mensajes</div>
    </a>

    
  </aside>

  <!-- MAIN CONTENT -->
  <div class="main-content">
    <!-- HEADER -->
    <header class="header">
      <div class="header-left">
        <button class="menu-btn" id="menuBtn" aria-label="Abrir menú">☰</button>
        <h1>Mis Proyectos</h1>
      </div>
      <div class="header-actions">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#newProjectModal">
          <img src="https://img.icons8.com/m_outlined/512/FFFFFF/plus.png" width="20"> Crear Proyecto
        </button>
        <button class="header-btn notification-btn" data-bs-toggle="modal" data-bs-target="#notificationsModal" aria-label="Notificaciones">
          <img src="https://img.icons8.com/ios11/512/FFFFFF/appointment-reminders.png" width="20">
          <span class="notification-badge" id="notificationBadge">0</span>
        </button>
        <div class="dropdown">
          <div class="user-avatar" data-bs-toggle="dropdown" aria-expanded="false" role="button" aria-haspopup="true" title="Usuario">User</div>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#"><img src="https://www.pngall.com/wp-content/uploads/5/Profile-PNG-File.png" width="20"> Mi perfil</a></li>
            <li><a class="dropdown-item" href="#"><img src="https://cdn2.iconfinder.com/data/icons/leto-most-searched-mix-3/64/__menu_more-28-512.png" width="20" alt="Mis Proyectos"> Mis proyectos</a></li>
            
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#"><img src="https://cdn-icons-png.flaticon.com/512/148/148913.png" width="20"> Configuración</a></li>
            <li><a class="dropdown-item" href="#"><img src="https://cdn-icons-png.flaticon.com/512/8212/8212701.png" width="20"> Cerrar sesión</a></li>
          </ul>
        </div>
      </div>
    </header>

    <!-- CONTENT -->
    <main class="content">
      <!-- STATS CARDS -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon"><img src="https://www.pngall.com/wp-content/uploads/12/Graph-PNG-Images-HD.png" width="30"></div>
          <div class="stat-info">
            <h3 id="stat-activos">5</h3>
            <p>Proyectos Activos</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><img src="https://www.freeiconspng.com/thumbs/checkmark-png/checkmark-png-5.png" width="30"></div>
          <div class="stat-info">
            <h3 id="stat-completados">12</h3>
            <p>Completados</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon"><img src="https://cdn-icons-png.flaticon.com/512/2476/2476725.png" width="30"></div>
          <div class="stat-info">
            <h3 id="stat-colaboradores">23</h3>
            <p>Colaboradores</p>
          </div>
        </div>
      </div>

      <!-- TABS -->
      <div class="tabs-container">
        <button class="tab-btn active" onclick="switchTab('activos', event)">Activos</button>
        <button class="tab-btn" onclick="switchTab('pausados', event)">Pausados</button>
        <button class="tab-btn" onclick="switchTab('completados', event)">Completados</button>
        <button class="tab-btn" onclick="switchTab('archivados', event)">Archivados</button>
      </div>

      <!-- PROYECTOS ACTIVOS -->
      <div id="tab-activos" class="tab-content">
        <div class="section-header">
          <div class="section-title">
            Proyectos Activos <span class="section-count" id="count-activos">(5)</span>
          </div>
        </div>
        <div class="project-grid" id="grid-activos"></div>
      </div>

      <!-- PROYECTOS PAUSADOS -->
      <div id="tab-pausados" class="tab-content" style="display: none;">
        <div class="section-header">
          <div class="section-title">
            Proyectos Pausados <span class="section-count" id="count-pausados">(0)</span>
          </div>
        </div>
        <div class="project-grid" id="grid-pausados"></div>
      </div>

      <!-- PROYECTOS COMPLETADOS -->
      <div id="tab-completados" class="tab-content" style="display: none;">
        <div class="section-header">
          <div class="section-title">
            Proyectos Completados <span class="section-count" id="count-completados">(0)</span>
          </div>
        </div>
        <div class="project-grid" id="grid-completados"></div>
      </div>

      <!-- PROYECTOS ARCHIVADOS -->
      <div id="tab-archivados" class="tab-content" style="display: none;">
        <div class="empty-state">
          <div class="empty-state-icon"><img src="https://static.vecteezy.com/system/resources/previews/013/362/757/non_2x/square-cardboard-box-free-png.png" width="120" height="140"></div>
          <h3>No hay proyectos archivados</h3>
          <p>Los proyectos que archives aparecerán aquí</p>
        </div>
      </div>
    </main>
  </div>

  <!-- MODAL: Crear Nuevo Proyecto -->
  <div class="modal fade" id="newProjectModal" tabindex="-1" aria-labelledby="newProjectModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="newProjectModalLabel">Crear Nuevo Proyecto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <form id="newProjectForm">
            <div class="mb-3">
              <label for="projectTitle" class="form-label">Título del Proyecto *</label>
              <input type="text" class="form-control" id="projectTitle" placeholder="Ej: App de Salud Mental" required>
            </div>

            <div class="mb-3">
              <label for="projectDescription" class="form-label">Descripción *</label>
              <textarea class="form-control" id="projectDescription" rows="4" placeholder="Describe tu proyecto..." required></textarea>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="projectCategory" class="form-label">Categoría *</label>
                <select class="form-select" id="projectCategory" required>
                  <option value="">Seleccionar...</option>
                  <option value="negocios">Negocios</option>
                  <option value="tecnologia">Tecnología</option>
                  <option value="diseno">Diseño</option>
                  <option value="marketing">Marketing</option>
                  <option value="ingenieria">Ingeniería</option>
                  <option value="startup">Startup</option>
                </select>
              </div>

              
            </div>

            <div class="mb-3">
              <label class="form-label">Habilidades Requeridas</label>
              <div class="d-flex flex-wrap gap-2" id="skillsContainer">
                <span class="skill-badge" onclick="toggleSkill(this)">JavaScript</span>
                <span class="skill-badge" onclick="toggleSkill(this)">Python</span>
                <span class="skill-badge" onclick="toggleSkill(this)">React</span>
                <span class="skill-badge" onclick="toggleSkill(this)">Node.js</span>
                <span class="skill-badge" onclick="toggleSkill(this)">UI/UX</span>
                <span class="skill-badge" onclick="toggleSkill(this)">Marketing</span>
                <span class="skill-badge" onclick="toggleSkill(this)">Diseño</span>
                <span class="skill-badge" onclick="toggleSkill(this)">Firebase</span>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" onclick="createProject()">Crear Proyecto</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Detalles del Proyecto -->
  <div class="modal fade" id="projectDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="projectDetailTitle">Detalles del Proyecto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="projectDetailBody">
          <!-- Content loaded dynamically -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          <button type="button" class="btn btn-primary" onclick="editCurrentProject()">Editar Proyecto</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: Editar Proyecto -->
  <div class="modal fade" id="editProjectModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Editar Proyecto</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="editProjectForm">
            <input type="hidden" id="editProjectId">
            <div class="mb-3">
              <label for="editProjectTitle" class="form-label">Título del Proyecto *</label>
              <input type="text" class="form-control" id="editProjectTitle" required>
            </div>

            <div class="mb-3">
              <label for="editProjectDescription" class="form-label">Descripción *</label>
              <textarea class="form-control" id="editProjectDescription" rows="4" required></textarea>
            </div>

            <div class="mb-3">
              <label for="editProjectProgress" class="form-label">Progreso (%)</label>
              <input type="range" class="form-range" id="editProjectProgress" min="0" max="100" value="0" oninput="updateProgressLabel(this.value)">
              <div class="text-center text-muted" id="progressLabel">0%</div>
            </div>

            <div class="mb-3">
              <label for="editProjectStatus" class="form-label">Estado</label>
              <select class="form-select" id="editProjectStatus">
                <option value="activo">Activo</option>
                <option value="pausado">Pausado</option>
                <option value="completado">Completado</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" onclick="saveProjectEdit()">Guardar Cambios</button>
        </div>
      </div>
    </div>
  </div>

   <!-- MODAL DE NOTIFICACIONES (CORREGIDO,) -->
  <div class="modal fade" id="notificationsModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Notificaciones</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-0" id="notificationsBody"></div>
        <div class="modal-footer">
          <button class="btn btn-secondary btn-sm" onclick="markAllAsRead()">Marcar todas como leídas</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Custom JS -->
  <script src="misProyectos.js"></script>
</body>
</html>